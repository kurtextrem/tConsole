/**
 * A jQuery Console Script.
 *
 * @author kurtextrem <kurtextrem@gmail.com>
 * @license CC BY-SA http://creativecommons.org/licenses/by-sa/3.0/
 * @copyright 2011-XXXX
 * @version 0.1
 * @jquery <= 1.6.1
 *
 */
(function($){cursor_idle=!1,$.fn.tConsole=function(options,templates,appname){$this=this,options&&$.extend(settings,options),appname||(appname=navigator.userAgent.search(/chrome/i)==-1?navigator.appName:"Google Chrome");var settings={name:"<insert your whatever here>",url:"cmds.php?cmd=",title:location.href,json:!0},tpl={engine:appname+" [Version "+(0|Math.random()*10)+"."+(0|Math.random()*10)+"."+(0|Math.random()*1e4)+"]",copyright:"Copyright (c) "+(new Date).getFullYear()+" "+settings.name+". All rights served.",html:'<header><div id="appname"></div><div id="copyright"></div></header><div class="path"></div><div class="command"></div><div id="cursor">_</div>',shift:{a:"A"}};templates&&$.extend(tpl,templates),this.html(tpl.html),$("#appname").text(tpl.engine),$("#copyright").text(tpl.copyright),$(".path").last().text(location.hostname+">"),window.title=settings.title,window.setInterval(function(){cursor_idle||$("#cursor").toggle()},500),$(document).keypress(function(a){if(!cursor_idle&&a.keyCode>46&&a.keyCode<222){var b=String.fromCharCode(a.keyCode);a.shiftKey||(b=b.toLowerCase()),$(".command").last().append(b),a.preventDefault()}}).keydown(function(e){e.keyCode==13&&settings.json&&$.getJSON(settings.url+$(".command").last().text().replace(/\s/,"%20"),function(json){cursor_idle=!0,json.answer&&$(".command").last().after('<div class="answer">'+json.answer+"</div>"),$("#cursor").remove(),$this.append('<div class="path">'+location.hostname+'&gt;</div><div class="command"></div><div id="cursor">_</div>'),json.handle!=""&&eval(json.handle),cursor_idle=!1});if(e.keyCode==8){var command=$(".command").last();command.text(command.text().substr(0,command.text().length-1))}e.keyCode==9&&e.preventDefault(),e.keyCode==32&&($(".command").last().append("&nbsp;"),e.preventDefault())});return}})(jQuery)